{"source":"!function(r){function t(t){for(var i,n,s=t[0],e=t[1],o=t[2],h=0,a=[];h<s.length;h++)n=s[h],l[n]&&a.push(l[n][0]),l[n]=0;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);for(f&&f(t);a.length;)a.shift()();return u.push.apply(u,o||[]),c()}function c(){for(var t,i=0;i<u.length;i++){for(var n=u[i],s=!0,e=1;e<n.length;e++){var o=n[e];0!==l[o]&&(s=!1)}s&&(u.splice(i--,1),t=h(h.s=n[0]))}return t}var n={},l={0:0},u=[];function h(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return r[t].call(i.exports,i,i.exports,h),i.l=!0,i.exports}h.m=r,h.c=n,h.d=function(t,i,n){h.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},h.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},h.t=function(i,t){if(1&t&&(i=h(i)),8&t)return i;if(4&t&&\"object\"==typeof i&&i&&i.__esModule)return i;var n=Object.create(null);if(h.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:i}),2&t&&\"string\"!=typeof i)for(var s in i)h.d(n,s,function(t){return i[t]}.bind(null,s));return n},h.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return h.d(i,\"a\",i),i},h.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},h.p=\"\";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var e=0;e<i.length;e++)t(i[e]);var f=s;u.push([0,1]),c()}([function(t,i,n){\"use strict\";n(1);var s,e=n(6);(new((s=e)&&s.__esModule?s:{default:s}).default).init({})},function(t,i,n){var s=n(2);\"string\"==typeof s&&(s=[[t.i,s,\"\"]]);var e={hmr:!0,transform:void 0,insertInto:void 0};n(4)(s,e);s.locals&&(t.exports=s.locals)},function(t,i,n){(t.exports=n(3)(!1)).push([t.i,\"canvas {\\n  display: block;\\n  margin: 50px auto;\\n  cursor: pointer;\\n  position: absolute;\\n  top: 0;\\n  left: 50%;\\n  transform: translateX(-50%);\\n}\\n#id {\\n  position: relative;\\n}\\nh2 {\\n  margin-top: 40px;\\n  text-align: center;\\n  color: #66ce60;\\n}\\n.css-chess {\\n  width: 450px;\\n  height: 450px;\\n  margin: 0 auto;\\n  box-shadow: -2px -2px 2px #efefef, 5px 5px 5px #b9b9b9;\\n  cursor: pointer;\\n}\\n.css-chess .css-chess-content {\\n  position: relative;\\n  box-sizing: border-box;\\n  padding-left: 20px;\\n  padding-top: 16px;\\n  width: 450px;\\n  height: 450px;\\n}\\n.css-chess .css-chess-content canvas {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 100;\\n}\\n.css-chess .css-chess-content .chess-table {\\n  border-collapse: collapse;\\n  width: 406px;\\n  text-align: center;\\n}\\n.css-chess .css-chess-content .chess-table tr td {\\n  height: 41px;\\n  border: 2px solid #ccc;\\n}\\n.btn {\\n  width: 100%;\\n  position: relative;\\n}\\n.btn .btn-content {\\n  width: 450px;\\n  height: 100px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  text-align: center;\\n  margin-top: 60px;\\n}\\n.btn .btn-content .start-btn {\\n  width: 100px;\\n  height: 40px;\\n  background: #66ce60;\\n  color: #fff;\\n  line-height: 40px;\\n  border-radius: 5px;\\n  margin-right: 20px;\\n}\\n.btn .btn-content .back-btn {\\n  width: 100px;\\n  height: 40px;\\n  background: #e59f4d;\\n  color: #fff;\\n  line-height: 40px;\\n  border-radius: 5px;\\n  margin-right: 20px;\\n}\\n.btn .btn-content .cancelBack-btn {\\n  width: 150px;\\n  height: 40px;\\n  background: #e59f4d;\\n  color: #fff;\\n  line-height: 40px;\\n  border-radius: 5px;\\n}\\n.disable-btn {\\n  background: #ccc !important;\\n  cursor: not-allowed;\\n}\\n.flex-xy {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\nbody {\\n  position: relative;\\n  padding: 0;\\n  margin: 0;\\n}\\n\",\"\"])},,,,function(t,i,n){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0}),i.default=void 0;var s=r(n(7)),e=r(n(34)),o=r(n(79)),h=r(n(87)),a=r(n(88));function r(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function i(){(0,h.default)(this,i);var t=(0,e.default)(this,(i.__proto__||(0,s.default)(i)).call(this));return t.board=10,t.chessBoard=[],t.winPaths=[],t.count=0,t.isOver=!1,t.myWin=[],t._myWin=[],t.otherWin=[],t.computerWin=[],t._computerWin=[],t.repeatPosition=!1,t._i=\"\",t._j=\"\",t._compi=0,t._compj=0,t.isBack=!1,t.self=!0,t}return(0,o.default)(i,t),(0,a.default)(i,[{key:\"addMethers\",value:function(){var i=this;this.canvas.addEventListener(\"click\",function(t){i.chessClick(t)}),this.backBtn.addEventListener(\"click\",function(){i.chessback()}),this.cancelBackBtn.addEventListener(\"click\",function(){i.chessCancleBack()})}},{key:\"getChessBoard\",value:function(){for(var t=[],i=0;i<10;i++){t[i]=[];for(var n=0;n<10;n++)t[i][n]=0}this.chessBoard=t}},{key:\"drawChess\",value:function(t,i,n){this.context.beginPath(),this.context.arc(20+45*t,20+45*i,13,0,2*Math.PI),this.context.closePath();var s=this.context.createRadialGradient(15+45*t+2,15+45*i-2,13,15+45*t+2,15+45*i-2,0);n?(s.addColorStop(0,\"#0a0a0a\"),s.addColorStop(1,\"#636766\")):(s.addColorStop(0,\"#d1d1d1\"),s.addColorStop(1,\"#f9f9f9\")),this.context.fillStyle=s,this.context.fill()}},{key:\"getWinPaths\",value:function(){for(var t=[],i=0,n=0;n<10;n++){t[n]=[];for(var s=0;s<10;s++)t[n][s]=[]}for(var e=0;e<10;e++)for(var o=0;o<6;o++){for(var h=0;h<5;h++)t[e][o+h][i]=!0;i++}for(e=0;e<10;e++)for(o=0;o<6;o++){for(h=0;h<5;h++)t[o+h][e][i]=!0;i++}for(e=0;e<6;e++)for(o=0;o<6;o++){for(h=0;h<5;h++)t[e+h][o+h][i]=!0;i++}for(e=0;e<6;e++)for(o=9;3<o;o--){for(h=0;h<5;h++)t[e+h][o-h][i]=!0;i++}this.count=i,this.winPaths=t;for(var a=0;a<i;a++)this.myWin[a]=0,this.otherWin[a]=0,this.computerWin[a]=0,this._myWin[a]=0,this._computerWin[a]=0}},{key:\"chessClick\",value:function(t){if(!this.isOver){this.cancelBackChangeStyle();var i=t.offsetX,n=t.offsetY;if(this.i=Math.floor(i/45),this.j=Math.floor(n/45),this._i===this.i&&this._j===this.j&&(this.repeatPosition=!0),this._i=this.i,this._j=this.j,0==this.chessBoard[this.i][this.j]){this.drawChess(this.i,this.j,this.self),this.self?this.chessBoard[this.i][this.j]=1:this.chessBoard[this.i][this.j]=2;for(var s=0;s<this.count;s++)if(this.winPaths[this.i][this.j][s]){if(this.self?(this.myWin[s]++,this._computerWin[s]=this.computerWin[s]):this.otherWin[s]++,this.computerWin[s]=6,5==this.myWin[s]){this.titleDom.innerHTML=\"Congratulations, you've won!!!\",this.isOver=!0;break}if(5==this.otherWin[s]){this.titleDom.innerHTML=\"Congratulations, you've won!!!\",this.isOver=!0;break}}this.self=!this.self,this.isOver||(this.self=!this.self,this.computerAI())}}}},{key:\"computerAI\",value:function(){for(var t=[],i=[],n=0,s=0,e=0,o=0;o<9;o++){t[o]=[],i[o]=[];for(var h=0;h<9;h++)t[o][h]=0,i[o][h]=0}for(o=0;o<9;o++)for(h=0;h<9;h++)if(0==this.chessBoard[o][h]){for(var a=0;a<this.count;a++)this.winPaths[o][h][a]&&(1==this.myWin[a]?t[o][h]+=200:2==this.myWin[a]?t[o][h]+=400:3==this.myWin[a]?t[o][h]+=2e3:4==this.myWin[a]&&(t[o][h]+=1e4),1==this.computerWin[a]?i[o][h]+=220:2==this.computerWin[a]?i[o][h]+=420:3==this.computerWin[a]?i[o][h]+=2100:4==this.computerWin[a]&&(i[o][h]+=2e4));t[o][h]>n?(n=t[o][h],s=o,e=h):t[o][h]==n&&i[o][h]>i[s][e]&&(s=o,e=h),i[o][h]>n?(n=i[o][h],s=o,e=h):i[o][h]==n&&t[o][h]>t[s][e]&&(s=o,e=h)}this.repeatPosition&&(s=this._compi,e=this._compj,this.repeatPosition=!1),this._compi=s,this._compj=e,this.drawChess(s,e,!1),this.chessBoard[s][e]=2;for(a=0;a<this.count;a++)this.winPaths[s][e][a]&&(this.computerWin[a]++,this._myWin[a]=this.myWin[a],this.myWin[a]=6,5==this.computerWin[a]&&(this.titleDom.innerHTML=\"AI wins. Keep trying!!!\",this.isOver=!0));this.isOver||console.log(123)}},{key:\"chessback\",value:function(){if(this.backBtn.className&&1<this.backBtn.className.split(\" \").length)console.log(\"还未开始下棋，无法悔棋～\");else{this.isOver&&(this.titleDom.innerHTML=\"GoBang\"),this.isOver=!1,this.destoryPieces(this._i,this._j);for(var t=this.chessBoard[this._i][this._j]=0;t<this.count;t++)this.winPaths[this._i][this._j][t]&&this.myWin[t]--;this.destoryPieces(this._compi,this._compj);for(t=this.chessBoard[this._compi][this._compj]=0;t<this.count;t++)this.winPaths[this._compi][this._compj][t]&&this.computerWin[t]--;this.backChangeStyle()}}},{key:\"chessCancleBack\",value:function(){if(this.cancelBackBtn.className&&1<this.cancelBackBtn.className.split(\" \").length)console.log(\"还未开始下棋，无法 撤销悔棋～\");else{this.chessBoard[this._i][this._j]=1,this.drawChess(this._i,this._j,this.self);for(var t=0;t<this.count;t++)this.winPaths[this._i][this._j][t]&&(this.myWin[t]++,this._computerWin[t]=this.computerWin[t],this.computerWin[t]=6),5==this.myWin[t]&&(this.titleDom.innerHTML=\"Congratulations, you've won!!!\",this.isOver=!0);this.chessBoard[this._compi][this._compj]=2,this.drawChess(this._compi,this._compj,!1);for(t=0;t<this.count;t++)this.winPaths[this._compi][this._compj][t]&&(this.computerWin[t]++,this._myWin[t]=this.myWin[t],this.myWin[t]=6),5==this.computerWin[t]&&(this.titleDom.innerHTML=\"AI wins. Keep trying!!!\",this.isOver=!0);this.cancelBackChangeStyle()}}},{key:\"destoryPieces\",value:function(t,i){this.context.clearRect(45*t+20-13,45*i+20-13,26,26),this.context.beginPath(),this.context.stroke()}},{key:\"drawChessBoard\",value:function(){}},{key:\"init\",value:function(){this.initDom(),this.addMethers(),this.drawChessBoard(),this.getChessBoard(),this.getWinPaths(),this.isBack||(this.cancelBackBtn.className+=\" disable-btn\",this.backBtn.className+=\" disable-btn\")}}]),i}(function(){function t(){(0,h.default)(this,t),this.titleDom=\"\",this.startBtn=\"\",this.backBtn=\"\",this.cancelBackBtn=\"\",this.canvas=\"\",this.context={}}return(0,a.default)(t,[{key:\"getDomFun\",value:function(t){return document.getElementById(t)}},{key:\"backChangeStyle\",value:function(){this.backBtn.className+=\" disable-btn\",this.cancelBackBtn.className=this.cancelBackBtn.className.split(\" \")[0]}},{key:\"cancelBackChangeStyle\",value:function(){this.cancelBackBtn.className+=\" disable-btn\",this.backBtn.className=this.backBtn.className.split(\" \")[0]}},{key:\"initDom\",value:function(){this.titleDom=this.getDomFun(\"title\"),this.startBtn=this.getDomFun(\"start\"),this.backBtn=this.getDomFun(\"back\"),this.cancelBackBtn=this.getDomFun(\"cancelBack\"),this.canvas=this.getDomFun(\"canvas\"),this.context=canvas.getContext(\"2d\")}}]),t}());i.default=c}]);"}